{% extends "index.html" %}

{% block body %}
    <h2>Targets:</h2>
    <br>

    {% if search_query != '' %}
        <h3>
            <i>
                Showing search result for: "<span style="color: crimson">{{search_query}}</span>"
            </i>
        </h3>
    {% endif %}

    <p><b>Total: {{response.total}} </b></p>

    <div>
        Sort by: 
        <select id="sort">
            <option value="1" {% if sorting == "scanstat.startTime:desc" %} selected="selected"{% endif %}>Init time desc</option>
            <option value="2" {% if sorting == "scanstat.startTime:asc" %} selected="selected"{% endif %}>Init time asc</option>
        </select>
    </div>
    <br>

    <table style="width:100%">
        <tr>
            <th>#</th>
            <th>Target</th>
            <th>Hostname</th>
            <th>Started Time</th>
            <th>Status</th>
            <th>Scan ID</th>
            <th>Scan Name</th>
            <th>Sumary Result</th>
        </tr>

        {% for item in response.records %}
        <tr>
            <td> {{loop.index}} </td>
            <td> <a href = '/targets/detail/{{item.id}}'> {{item.target}} </a> </td>
            <td> {{item.hostname}} </td>
            <td> {{item.startTime}} </td>
            <td> {{item.status}} </td>
            <td> <a href = '/scan/detail/{{item.root_scan_id}}'> {{item.scan_id}} </a> </td>
            <td> {{item.scan_name}} </td>
            <td>
                <span class="vul" style="background: blue"> {{item.summary_result.informational}} </span>
                <span class="vul" style="background: green"> {{item.summary_result.low}} </span>
                <span class="vul" style="background: orange"> {{item.summary_result.medium}} </span>
                <span class="vul" style="background: red"> {{item.summary_result.high}} </span>
            </td>
        </tr>
        {% endfor %}


    </table>
{% endblock  %}