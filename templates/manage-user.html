{% extends "index.html" %}
{% block body %}

<div class="container-fluid">

    <div class="container-fluid">

        <!-- Page Heading -->
        {% if msg %}
        <p class=".text-lg" style="color: red;">{{msg}}</p>
        {% endif %}
        <!-- DataTales Example -->
        <div class="card shadow mb-4">
                <nav class="navbar navbar-expand navbar-light bg-light mb-4">
                   <span class="navbar-brand h3 mb-1 text-gray-800">Manage User</span>
                   <ul class="navbar-nav ml-auto">
                      <a href="/add-user" class="btn btn-primary btn-icon-split ml-auto">
                      <span class="icon text-white-50">
                      <i class="fas fa-user-plus"></i>
                      </span>
                      <span class="text">Add User</span>
                      </a>
                   </ul>
                </nav>
                <div class="card-body">
                   <div class="table-responsive">
                      <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
                         <div class="row">
                            <div class="col-sm-12">
                               <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                  <thead>
                                     <tr>
                                        <th>Username</th>
                                        <th>Full Name</th>
                                        <th>Role</th>
                                        <th>Status</th>
                                        <th>Created date</th>
                                        <th>Action</th>
                                     </tr>
                                  </thead>
                                  <tbody>
                                     {% for item in records %}
                                     <tr>
                                        <td>{{item.username}}</td>
                                        <td>{{item.fullname}}</td>
                                        <td>
                                           {% if item.role == 1%}
                                           ADMIN
                                           {% else %}
                                           USER
                                           {% endif %}
                                        </td>
                                        <td>
                                           {% if item.is_disable %}
                                           <i class="fas fa-times-circle" style="color: red;"></i>
                                           {% else %}
                                           <i class="fas fa-check-circle" style="color: green;"></i>
                                           {% endif %}
                                        </td>
                                        <td>
                                           {{ item.created_date }}
                                        </td>
                                        <td>
                                           <div class="dropdown">
                                              <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                              Actions
                                              </button>
                                              <div class="dropdown-menu animated--fade-in" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                                                 {% if item.is_disable == True%}
                                                 <a href="/enable-user/{{item.id}}" class="dropdown-item ">
                                                 <span class="icon">
                                                 <i class="fas fa-unlock"></i>
                                                 </span>
                                                 <span class="text">Unlock</span>
                                                 </a>
                                                 {% else %}
                                                 <a href="/disable-user/{{item.id}}" class="dropdown-item ">
                                                 <span class="icon">
                                                 <i class="fas fa-lock"></i>
                                                 </span>
                                                 <span class="text">Lock</span>
                                                 </a>
                                                 {% endif %}
                                                 <a href="/delete-user/{{item.id}}" class="dropdown-item ">
                                                 <span class="icon">
                                                 <i class="fas fa-trash"></i>
                                                 </span>
                                                 <span class="text">Remove</span>
                                                 </a>
                                                 <a href="/first-login/{{item.id}}" class="dropdown-item ">
                                                 <span class="icon">
                                                 <i class="fas fa-qrcode"></i>
                                                 </span>
                                                 <span class="text">Re-create OTP</span>
                                                 </a>
                                                 <a href="/update-user-by-admin/{{item.id}}" class="dropdown-item ">
                                                 <span class="icon">
                                                 <i class="fas fa-key"></i>
                                                 </span>
                                                 <span class="text">Update infomation</span>
                                                 </a>
                                              </div>
                                           </div>
                                        </td>
                                     </tr>
                                     {% endfor %}
                                  </tbody>
                               </table>
                            </div>
                         </div>
                         <div class="row">
                            <div class="col-sm-12 col-md-5">
                               <div class="dataTables_info" id="dataTable_info" role="status" aria-live="polite">
                                  Showing {{(paging.paging_from - 1) * paging.paging_size + 1}} to {{(paging.paging_from - 1) * paging.paging_size + records|length}} of {{paging.paging_total}} entries
                               </div>
                            </div>
                            <div class="col-sm-12 col-md-7">
                               <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">
                                  <ul class="pagination">
                                     <li 
                                        class="paginate_button page-item {% if paging.paging_from == 1 %} disabled {% endif %}" 
                                        id="dataTable_previous">
                                        <a aria-controls="dataTable" data-dt-idx="1" tabindex="0" class="page-link"><<<</a>
                                     </li>
                                     {% for page_index in range(paging.left_page, paging.right_page + 1) %}
                                     <li 
                                        class="paginate_button page-item {% if paging.paging_from == page_index %} active {% endif %}">
                                        <a aria-controls="dataTable" data-dt-idx="{{page_index}}" tabindex="0" class="page-link">{{page_index}}</a>
                                     </li>
                                     {% endfor %}
                                     <li 
                                        class="paginate_button page-item {% if paging.paging_from == (paging.paging_total / paging.paging_size)|round(0, 'ceil')|int %} disabled {% endif %}" 
                                        id="dataTable_previous">
                                        <a aria-controls="dataTable" data-dt-idx="{{(paging.paging_total / paging.paging_size)|round(0, 'ceil')|int }}" tabindex="0" class="page-link">>>></a>
                                     </li>
                                  </ul>
                               </div>
                            </div>
                         </div>
                      </div>
                   </div>
                </div>
             </div>

      </div>

</div>
{% endblock %}